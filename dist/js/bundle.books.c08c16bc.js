(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["bundle.books"],{"04b1":function(e,t,n){e.exports=n.p+"img/spinner-icon.bbf63906.gif"},"16f4":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid"},[e.loading?n("Loading",{attrs:{msg:e.message}}):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"row"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.books.length,expression:"books.length"}],staticClass:"col-sm-12"},[n("h2",[e._v("Books Available for loan "+e._s(e.loanbooks.length))])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"form-row"},e._l(e.books,(function(t,r){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.copies_available>0,expression:"book.copies_available > 0"}],key:t._id,staticClass:"col-lg-6 mb-2 flex-column"},[n("div",{staticClass:"card h-100"},[n("div",{staticClass:"card-header d-flex"},[n("h4",{staticClass:"text-truncate flex-grow-1 flex-shrink-1 mb-0 pb-1 align-self-center",attrs:{title:t.title}},[e._v(" "+e._s(t.title)+" ")])]),n("div",{staticClass:"card-body"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-6 form-group"},[n("label",[e._v("Copies available")]),e._v(" "+e._s(t.copies_available)+" ")]),n("div",{staticClass:"col-lg-6 form-group"},[n("label",[e._v("Loan book to")]),n("select",{staticClass:"form-control custom-select",domProps:{value:t.loan_to},on:{change:function(t){return e.update("books."+r+".loan_to",t)}}},[n("option",{domProps:{value:""}}),e._l(e.getUsers(t),(function(t){return n("option",{key:t._id,domProps:{value:t._id}},[e._v(" "+e._s(t.name)+" ")])}))],2)])]),n("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.loan_to,expression:"book.loan_to != ''"}],staticClass:"row"},[n("div",{staticClass:"col-sm-12"},[n("button",{staticClass:"btn btn-block btn-primary",on:{click:function(n){return e.loanBook(t)}}},[e._v(" Loan book ")])])])])])])})),0)],1)},o=[],a=(n("4de4"),n("b0c0"),n("5530")),i=(n("96cf"),n("1da1")),s=n("2f62"),c=n("5c8a"),u=n("c428"),l=n("9285"),f={name:"LoanBooks",components:{Loading:u["a"]},data:function(){return{message:"",loading:!1}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.message="Getting books please be patient",e.loading=!0,t.next=4,e.loadBooks();case 4:return t.next=6,e.loadUsers();case 6:e.message="",e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},methods:Object(a["a"])({},Object(s["b"])(["getBooksAction","getUsersAction","updateValue","updateBookAction","updateUserAction"]),{loadBooks:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getBooksAction();case 2:case"end":return t.stop()}}),t)})))()},loadUsers:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getUsersAction();case 2:case"end":return t.stop()}}),t)})))()},getUsers:function(e){var t=e.loan_history,n=this.users.filter((function(e){var n=!0;3===e.onloan&&(n=!1);for(var r=0;r<t.length;r++)t[r]._id===e._id&&!0===t[r].is_loaned&&(n=!1);if(n)return e}));return n},update:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.updateValue({path:e,value:t.target.value});case 2:case"end":return r.stop()}}),r)})))()},loanBook:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=Object(c["a"])(e),o=Object(c["a"])(t.getUserById(r.loan_to)),a=new Date,r.loan_history.push({_id:o._id,name:o.name,is_loaned:!0,loan_date:l["a"].format(a,"DD-MM-YYYY hh:mm"),return_date:""}),r.copies_available--,r.loan_to="",o.onloan++,o.loan_history.push({_id:r._id,title:r.title,is_loaned:!0,loan_date:l["a"].format(a,"DD-MM-YYYY hh:mm"),return_date:""}),n.next=10,t.updateBookAction(r);case 10:return n.next=12,t.updateUserAction(o);case 12:case"end":return n.stop()}}),n)})))()}}),computed:Object(a["a"])({},Object(s["c"])(["getUserById"]),{},Object(s["d"])(["books","users"]),{loanbooks:function(){var e=this.books.filter((function(e){return e.copies_available>0}));return e}})},d=f,p=(n("3e0d"),n("2877")),v=Object(p["a"])(d,r,o,!1,null,"05e4ecea",null);t["default"]=v.exports},"2f74":function(e,t,n){"use strict";function r(){return!1}t["a"]=r},"33b8":function(e,t,n){},3492:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid"},[e.loading?n("Loading",{attrs:{msg:e.message}}):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"row"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.books.length,expression:"books.length"}],staticClass:"col-sm-12"},[n("h2",[e._v("Books Available "+e._s(e.books.length))])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"form-row"},e._l(e.books,(function(t){return n("div",{key:t._id,staticClass:"col-lg-6 mb-2 flex-column"},[n("div",{staticClass:"card h-100"},[n("div",{staticClass:"card-header d-flex"},[n("h4",{staticClass:"text-truncate flex-grow-1 flex-shrink-1 mb-0 pb-1 align-self-center",attrs:{title:t.title}},[e._v(" "+e._s(t.title)+" ")]),n("button",{staticClass:"btn btn-lg btn-link flex-grow-0 flex-shrink-0",on:{click:function(n){return e.askToDelete(t)}}},[e._v(" Delete book ")])]),n("div",{staticClass:"card-body"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12"},[e._v(" "+e._s(t.summary)+" ")]),n("div",{staticClass:"col-lg-6"},[n("label",[e._v("Copies purchased")]),e._v(" "+e._s(t.copies)+" ")]),n("div",{staticClass:"col-lg-6"},[n("label",[e._v("Copies available")]),e._v(" "+e._s(t.copies_available)+" ")]),n("div",{staticClass:"col-lg-6"},[n("label",[e._v(e._s(t.loan_history.filter((function(e){return!0===e.is_loaned})).length)+" Copies loaned")]),t.loan_history.length>0?n("ul",e._l(t.loan_history,(function(t,r){return n("li",{directives:[{name:"show",rawName:"v-show",value:!0===t.is_loaned,expression:"loan.is_loaned === true"}],key:r},[e._v(" "+e._s(t.name)+" ")])})),0):e._e()]),n("div",{staticClass:"col-lg-6"},[n("label",[e._v("ISBN")]),e._v(" "+e._s(t.ISBN)+" ")])])])])])})),0)],1)},o=[],a=(n("4de4"),n("d81d"),n("b0c0"),n("5530")),i=(n("96cf"),n("1da1")),s=n("2f62"),c=n("c428"),u=n("c40d"),l={name:"ManageBooks",components:{Loading:c["a"]},data:function(){return{message:"",loading:!1}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.loadBooks();case 2:case"end":return t.stop()}}),t)})))()},methods:Object(a["a"])({},Object(s["b"])(["getBooksAction","deleteBookAction"]),{loadBooks:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.message="Getting books please be patient",e.loading=!0,t.next=4,e.getBooksAction();case 4:e.message="",e.loading=!1;case 6:case"end":return t.stop()}}),t)})))()},askToDelete:function(e){var t=this;if(0===e.loan_history.filter((function(e){return!0===e.is_loaned})).length){var n=function(){return t.deleteBook(e)},r=function(){};u["a"].confirm("Are you sure you want to delete <b>".concat(e.title,"</b>"),n,r,{labels:{confirm:"Delete confirmation"}})}else u["a"].alert("Book cant deleted because is loaned by <b>".concat(e.loan_history.map((function(e){return e.name})),"</b>"))},deleteBook:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=3;break}return n.next=3,t.deleteBookAction(e);case 3:case"end":return n.stop()}}),n)})))()}}),computed:Object(a["a"])({},Object(s["d"])(["books"]))},f=l,d=(n("c465"),n("2877")),p=Object(d["a"])(f,r,o,!1,null,"49a964f9",null);t["default"]=p.exports},"3e0d":function(e,t,n){"use strict";var r=n("33b8"),o=n.n(r);o.a},"52e8":function(e,t,n){},"563f":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid"},[e._m(0),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("form",{attrs:{novalidate:"","data-vv-scope":"create-book-form"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-6 form-group"},[n("label",[e._v("Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.book.title,expression:"book.title"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",name:"title"},domProps:{value:e.book.title},on:{input:function(t){t.target.composing||e.$set(e.book,"title",t.target.value)}}}),e.errors.has("create-book-form.title")?n("div",{staticClass:"invalid-feedback"},[e._v(" "+e._s(e.errors.first("create-book-form.title"))+" ")]):e._e()]),n("div",{staticClass:"col-lg-6 form-group"},[n("label",[e._v("ISBN")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.book.ISBN,expression:"book.ISBN"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",name:"ISBN"},domProps:{value:e.book.ISBN},on:{input:function(t){t.target.composing||e.$set(e.book,"ISBN",t.target.value)}}}),e.errors.has("create-book-form.ISBN")?n("div",{staticClass:"invalid-feedback"},[e._v(" "+e._s(e.errors.first("create-book-form.ISBN"))+" ")]):e._e()]),n("div",{staticClass:"col-lg-6 form-group"},[n("label",[e._v("Copies")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.book.copies,expression:"book.copies"},{name:"validate",rawName:"v-validate",value:{required:!0,numeric:!0},expression:"{ required: true, numeric: true }"}],staticClass:"form-control",attrs:{type:"number",name:"copies"},domProps:{value:e.book.copies},on:{input:function(t){t.target.composing||e.$set(e.book,"copies",t.target.value)}}}),e.errors.has("create-book-form.copies")?n("div",{staticClass:"invalid-feedback"},[e._v(" "+e._s(e.errors.first("create-book-form.copies"))+" ")]):e._e()]),n("div",{staticClass:"col-lg-6 form-group"},[n("label",[e._v("Copies available for loan")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.book.copies_available,expression:"book.copies_available"},{name:"validate",rawName:"v-validate",value:{required:!0,numeric:!0,max_value:e.book.copies},expression:"{ required: true, numeric: true, max_value: book.copies }"}],staticClass:"form-control",attrs:{type:"number",name:"copies_available"},domProps:{value:e.book.copies_available},on:{input:function(t){t.target.composing||e.$set(e.book,"copies_available",t.target.value)}}}),e.errors.has("create-book-form.copies_available")?n("div",{staticClass:"invalid-feedback"},[e._v(" "+e._s(e.errors.first("create-book-form.copies_available"))+" ")]):e._e()]),n("div",{staticClass:"col-lg-12 form-group"},[n("label",[e._v("Summary")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.book.summary,expression:"book.summary"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",name:"summary"},domProps:{value:e.book.summary},on:{input:function(t){t.target.composing||e.$set(e.book,"summary",t.target.value)}}}),e._v(" "),e.errors.has("create-book-form.summary")?n("div",{staticClass:"invalid-feedback"},[e._v(" "+e._s(e.errors.first("create-book-form.summary"))+" ")]):e._e()])])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12 d-flex"},[n("div",{staticClass:"ml-auto"},[n("button",{staticClass:"btn btn-lg btn-primary mr-2",on:{click:function(t){return e.saveBook()}}},[e._v(" Save ")]),n("button",{staticClass:"btn btn-lg btn-secondary",on:{click:function(t){return e.cancel()}}},[e._v(" Cancel ")])])])])])])])])])},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12"},[n("h2",[e._v("Add new book")])])])}],a=(n("96cf"),n("1da1")),i=n("5530"),s=n("2f62"),c=n("c40d"),u={name:"CreateBook",data:function(){return{book:{title:"",ISBN:"",copies:"",copies_available:"",loan_history:[],loan_to:"",summary:""}}},methods:Object(i["a"])({},Object(s["b"])(["addBookAction"]),{saveBook:function(){var e=this;this.$validator.validateAll("create-book-form").then(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=8;break}if(void 0!==e.getBookByISBN(e.book.ISBN)){t.next=7;break}return t.next=4,e.addBookAction(e.book);case 4:e.$router.push({name:"home"}),t.next=8;break;case 7:c["a"].alert("Book cant created because this ISBN <b>".concat(e.book.ISBN,"</b> exists "));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},cancel:function(){this.$router.push({name:"home"})}}),computed:Object(i["a"])({},Object(s["c"])(["getBookByISBN"]))},l=u,f=n("2877"),d=Object(f["a"])(l,r,o,!1,null,null,null);t["default"]=d.exports},"58e0":function(e,t,n){"use strict";(function(e){var r=n("26ee"),o=n("2f74"),a="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=a&&"object"==typeof e&&e&&!e.nodeType&&e,s=i&&i.exports===a,c=s?r["a"].Buffer:void 0,u=c?c.isBuffer:void 0,l=u||o["a"];t["a"]=l}).call(this,n("dd40")(e))},"5c8a":function(e,t,n){"use strict";var r=n("9cbb");function o(){this.__data__=new r["a"],this.size=0}var a=o;function i(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n}var s=i;function c(e){return this.__data__.get(e)}var u=c;function l(e){return this.__data__.has(e)}var f=l,d=n("ddc9"),p=n("0e59"),v=200;function b(e,t){var n=this.__data__;if(n instanceof r["a"]){var o=n.__data__;if(!d["a"]||o.length<v-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new p["a"](o)}return n.set(e,t),this.size=n.size,this}var m=b;function h(e){var t=this.__data__=new r["a"](e);this.size=t.size}h.prototype.clear=a,h.prototype["delete"]=s,h.prototype.get=u,h.prototype.has=f,h.prototype.set=m;var y=h;function g(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(!1===t(e[n],n,e))break;return e}var k=g,w=n("db72"),_=n("b84d");function j(e,t,n,r){var o=!n;n||(n={});var a=-1,i=t.length;while(++a<i){var s=t[a],c=r?r(n[s],e[s],s,n,e):void 0;void 0===c&&(c=e[s]),o?Object(_["a"])(n,s,c):Object(w["a"])(n,s,c)}return n}var O=j;function x(e,t){var n=-1,r=Array(e);while(++n<e)r[n]=t(n);return r}var C=x,B=n("f0ce"),S=n("1147"),D="[object Arguments]";function A(e){return Object(S["a"])(e)&&Object(B["a"])(e)==D}var M=A,N=Object.prototype,P=N.hasOwnProperty,I=N.propertyIsEnumerable,T=M(function(){return arguments}())?M:function(e){return Object(S["a"])(e)&&P.call(e,"callee")&&!I.call(e,"callee")},E=T,Y=n("ff51"),R=n("58e0"),U=n("7129"),L=9007199254740991;function H(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=L}var F=H,$="[object Arguments]",q="[object Array]",z="[object Boolean]",V="[object Date]",Z="[object Error]",G="[object Function]",J="[object Map]",W="[object Number]",K="[object Object]",Q="[object RegExp]",X="[object Set]",ee="[object String]",te="[object WeakMap]",ne="[object ArrayBuffer]",re="[object DataView]",oe="[object Float32Array]",ae="[object Float64Array]",ie="[object Int8Array]",se="[object Int16Array]",ce="[object Int32Array]",ue="[object Uint8Array]",le="[object Uint8ClampedArray]",fe="[object Uint16Array]",de="[object Uint32Array]",pe={};function ve(e){return Object(S["a"])(e)&&F(e.length)&&!!pe[Object(B["a"])(e)]}pe[oe]=pe[ae]=pe[ie]=pe[se]=pe[ce]=pe[ue]=pe[le]=pe[fe]=pe[de]=!0,pe[$]=pe[q]=pe[ne]=pe[z]=pe[re]=pe[V]=pe[Z]=pe[G]=pe[J]=pe[W]=pe[K]=pe[Q]=pe[X]=pe[ee]=pe[te]=!1;var be=ve;function me(e){return function(t){return e(t)}}var he=me,ye=n("c6eb"),ge=ye["a"]&&ye["a"].isTypedArray,ke=ge?he(ge):be,we=ke,_e=Object.prototype,je=_e.hasOwnProperty;function Oe(e,t){var n=Object(Y["a"])(e),r=!n&&E(e),o=!n&&!r&&Object(R["a"])(e),a=!n&&!r&&!o&&we(e),i=n||r||o||a,s=i?C(e.length,String):[],c=s.length;for(var u in e)!t&&!je.call(e,u)||i&&("length"==u||o&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Object(U["a"])(u,c))||s.push(u);return s}var xe=Oe,Ce=Object.prototype;function Be(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||Ce;return e===n}var Se=Be;function De(e,t){return function(n){return e(t(n))}}var Ae=De,Me=Ae(Object.keys,Object),Ne=Me,Pe=Object.prototype,Ie=Pe.hasOwnProperty;function Te(e){if(!Se(e))return Ne(e);var t=[];for(var n in Object(e))Ie.call(e,n)&&"constructor"!=n&&t.push(n);return t}var Ee=Te,Ye=n("bc9b");function Re(e){return null!=e&&F(e.length)&&!Object(Ye["a"])(e)}var Ue=Re;function Le(e){return Ue(e)?xe(e):Ee(e)}var He=Le;function Fe(e,t){return e&&O(t,He(t),e)}var $e=Fe,qe=n("2332");function ze(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}var Ve=ze,Ze=Object.prototype,Ge=Ze.hasOwnProperty;function Je(e){if(!Object(qe["a"])(e))return Ve(e);var t=Se(e),n=[];for(var r in e)("constructor"!=r||!t&&Ge.call(e,r))&&n.push(r);return n}var We=Je;function Ke(e){return Ue(e)?xe(e,!0):We(e)}var Qe=Ke;function Xe(e,t){return e&&O(t,Qe(t),e)}var et=Xe,tt=n("dff1");function nt(e,t){var n=-1,r=e.length;t||(t=Array(r));while(++n<r)t[n]=e[n];return t}var rt=nt;function ot(e,t){var n=-1,r=null==e?0:e.length,o=0,a=[];while(++n<r){var i=e[n];t(i,n,e)&&(a[o++]=i)}return a}var at=ot;function it(){return[]}var st=it,ct=Object.prototype,ut=ct.propertyIsEnumerable,lt=Object.getOwnPropertySymbols,ft=lt?function(e){return null==e?[]:(e=Object(e),at(lt(e),(function(t){return ut.call(e,t)})))}:st,dt=ft;function pt(e,t){return O(e,dt(e),t)}var vt=pt;function bt(e,t){var n=-1,r=t.length,o=e.length;while(++n<r)e[o+n]=t[n];return e}var mt=bt,ht=Ae(Object.getPrototypeOf,Object),yt=ht,gt=Object.getOwnPropertySymbols,kt=gt?function(e){var t=[];while(e)mt(t,dt(e)),e=yt(e);return t}:st,wt=kt;function _t(e,t){return O(e,wt(e),t)}var jt=_t;function Ot(e,t,n){var r=t(e);return Object(Y["a"])(e)?r:mt(r,n(e))}var xt=Ot;function Ct(e){return xt(e,He,dt)}var Bt=Ct;function St(e){return xt(e,Qe,wt)}var Dt=St,At=n("63bc"),Mt=n("26ee"),Nt=Object(At["a"])(Mt["a"],"DataView"),Pt=Nt,It=Object(At["a"])(Mt["a"],"Promise"),Tt=It,Et=Object(At["a"])(Mt["a"],"Set"),Yt=Et,Rt=Object(At["a"])(Mt["a"],"WeakMap"),Ut=Rt,Lt=n("74b5"),Ht="[object Map]",Ft="[object Object]",$t="[object Promise]",qt="[object Set]",zt="[object WeakMap]",Vt="[object DataView]",Zt=Object(Lt["a"])(Pt),Gt=Object(Lt["a"])(d["a"]),Jt=Object(Lt["a"])(Tt),Wt=Object(Lt["a"])(Yt),Kt=Object(Lt["a"])(Ut),Qt=B["a"];(Pt&&Qt(new Pt(new ArrayBuffer(1)))!=Vt||d["a"]&&Qt(new d["a"])!=Ht||Tt&&Qt(Tt.resolve())!=$t||Yt&&Qt(new Yt)!=qt||Ut&&Qt(new Ut)!=zt)&&(Qt=function(e){var t=Object(B["a"])(e),n=t==Ft?e.constructor:void 0,r=n?Object(Lt["a"])(n):"";if(r)switch(r){case Zt:return Vt;case Gt:return Ht;case Jt:return $t;case Wt:return qt;case Kt:return zt}return t});var Xt=Qt,en=Object.prototype,tn=en.hasOwnProperty;function nn(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&tn.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var rn=nn,on=Mt["a"].Uint8Array,an=on;function sn(e){var t=new e.constructor(e.byteLength);return new an(t).set(new an(e)),t}var cn=sn;function un(e,t){var n=t?cn(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var ln=un,fn=/\w*$/;function dn(e){var t=new e.constructor(e.source,fn.exec(e));return t.lastIndex=e.lastIndex,t}var pn=dn,vn=n("ca54"),bn=vn["a"]?vn["a"].prototype:void 0,mn=bn?bn.valueOf:void 0;function hn(e){return mn?Object(mn.call(e)):{}}var yn=hn;function gn(e,t){var n=t?cn(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var kn=gn,wn="[object Boolean]",_n="[object Date]",jn="[object Map]",On="[object Number]",xn="[object RegExp]",Cn="[object Set]",Bn="[object String]",Sn="[object Symbol]",Dn="[object ArrayBuffer]",An="[object DataView]",Mn="[object Float32Array]",Nn="[object Float64Array]",Pn="[object Int8Array]",In="[object Int16Array]",Tn="[object Int32Array]",En="[object Uint8Array]",Yn="[object Uint8ClampedArray]",Rn="[object Uint16Array]",Un="[object Uint32Array]";function Ln(e,t,n){var r=e.constructor;switch(t){case Dn:return cn(e);case wn:case _n:return new r(+e);case An:return ln(e,n);case Mn:case Nn:case Pn:case In:case Tn:case En:case Yn:case Rn:case Un:return kn(e,n);case jn:return new r;case On:case Bn:return new r(e);case xn:return pn(e);case Cn:return new r;case Sn:return yn(e)}}var Hn=Ln,Fn=Object.create,$n=function(){function e(){}return function(t){if(!Object(qe["a"])(t))return{};if(Fn)return Fn(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),qn=$n;function zn(e){return"function"!=typeof e.constructor||Se(e)?{}:qn(yt(e))}var Vn=zn,Zn="[object Map]";function Gn(e){return Object(S["a"])(e)&&Xt(e)==Zn}var Jn=Gn,Wn=ye["a"]&&ye["a"].isMap,Kn=Wn?he(Wn):Jn,Qn=Kn,Xn="[object Set]";function er(e){return Object(S["a"])(e)&&Xt(e)==Xn}var tr=er,nr=ye["a"]&&ye["a"].isSet,rr=nr?he(nr):tr,or=rr,ar=1,ir=2,sr=4,cr="[object Arguments]",ur="[object Array]",lr="[object Boolean]",fr="[object Date]",dr="[object Error]",pr="[object Function]",vr="[object GeneratorFunction]",br="[object Map]",mr="[object Number]",hr="[object Object]",yr="[object RegExp]",gr="[object Set]",kr="[object String]",wr="[object Symbol]",_r="[object WeakMap]",jr="[object ArrayBuffer]",Or="[object DataView]",xr="[object Float32Array]",Cr="[object Float64Array]",Br="[object Int8Array]",Sr="[object Int16Array]",Dr="[object Int32Array]",Ar="[object Uint8Array]",Mr="[object Uint8ClampedArray]",Nr="[object Uint16Array]",Pr="[object Uint32Array]",Ir={};function Tr(e,t,n,r,o,a){var i,s=t&ar,c=t&ir,u=t&sr;if(n&&(i=o?n(e,r,o,a):n(e)),void 0!==i)return i;if(!Object(qe["a"])(e))return e;var l=Object(Y["a"])(e);if(l){if(i=rn(e),!s)return rt(e,i)}else{var f=Xt(e),d=f==pr||f==vr;if(Object(R["a"])(e))return Object(tt["a"])(e,s);if(f==hr||f==cr||d&&!o){if(i=c||d?{}:Vn(e),!s)return c?jt(e,et(i,e)):vt(e,$e(i,e))}else{if(!Ir[f])return o?e:{};i=Hn(e,f,s)}}a||(a=new y);var p=a.get(e);if(p)return p;a.set(e,i),or(e)?e.forEach((function(r){i.add(Tr(r,t,n,r,e,a))})):Qn(e)&&e.forEach((function(r,o){i.set(o,Tr(r,t,n,o,e,a))}));var v=u?c?Dt:Bt:c?keysIn:He,b=l?void 0:v(e);return k(b||e,(function(r,o){b&&(o=r,r=e[o]),Object(w["a"])(i,o,Tr(r,t,n,o,e,a))})),i}Ir[cr]=Ir[ur]=Ir[jr]=Ir[Or]=Ir[lr]=Ir[fr]=Ir[xr]=Ir[Cr]=Ir[Br]=Ir[Sr]=Ir[Dr]=Ir[br]=Ir[mr]=Ir[hr]=Ir[yr]=Ir[gr]=Ir[kr]=Ir[wr]=Ir[Ar]=Ir[Mr]=Ir[Nr]=Ir[Pr]=!0,Ir[dr]=Ir[pr]=Ir[_r]=!1;var Er=Tr,Yr=1,Rr=4;function Ur(e){return Er(e,Yr|Rr)}t["a"]=Ur},"5e93":function(e,t,n){"use strict";var r=n("52e8"),o=n.n(r);o.a},"5eaa":function(e,t,n){!function(t,n){e.exports=n()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var a={maxNotifications:10,animationDuration:300,position:"bottom-right",labels:{tip:"Tip",info:"Info",success:"Success",warning:"Attention",alert:"Error",async:"Loading",confirm:"Confirmation required",confirmOk:"OK",confirmCancel:"Cancel"},icons:{tip:"question-circle",info:"info-circle",success:"check-circle",warning:"exclamation-circle",alert:"exclamation-triangle",async:"cog fa-spin",confirm:"exclamation-triangle",prefix:"<i class='fa fas fa-fw fa-",suffix:"'></i>",enabled:!0},replacements:{tip:null,info:null,success:null,warning:null,alert:null,async:null,"async-block":null,modal:null,confirm:null,general:{"<script>":"","<\/script>":""}},messages:{tip:"",info:"",success:"Action has been succeeded",warning:"",alert:"Action has been failed",confirm:"This action can't be undone. Continue?",async:"Please, wait...","async-block":"Loading"},formatError:function(e){if(e.response){if(!e.response.data)return"500 API Server Error";if(e.response.data.errors)return e.response.data.errors.map((function(e){return e.detail})).join("<br>");if(e.response.statusText)return"".concat(e.response.status," ").concat(e.response.statusText,": ").concat(e.response.data)}return e.message?e.message:e},durations:{global:5e3,success:null,info:null,tip:null,warning:null,alert:null},minDurations:{async:1e3,"async-block":1e3}},i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,this.defaultsDeep(n,t))}var t,n,i;return t=e,(n=[{key:"icon",value:function(e){return this.icons.enabled?"".concat(this.icons.prefix).concat(this.icons[e]).concat(this.icons.suffix):""}},{key:"label",value:function(e){return this.labels[e]}},{key:"duration",value:function(e){var t=this.durations[e];return null===t?this.durations.global:t}},{key:"toSecs",value:function(e){return"".concat(e/1e3,"s")}},{key:"applyReplacements",value:function(e,t){if(!e)return this.messages[t]||"";for(var n=0,r=["general",t];n<r.length;n++){var o=r[n];if(this.replacements[o])for(var a in this.replacements[o])e=e.replace(a,this.replacements[o][a])}return e}},{key:"override",value:function(t){return t?new e(t,this):this}},{key:"defaultsDeep",value:function(e,t){var n={};for(var o in e)t.hasOwnProperty(o)?n[o]="object"===r(e[o])&&null!==e[o]?this.defaultsDeep(e[o],t[o]):t[o]:n[o]=e[o];return n}}])&&o(t.prototype,n),i&&o(t,i),e}(),s={popup:"".concat("awn","-popup"),toast:"".concat("awn","-toast"),btn:"".concat("awn","-btn"),confirm:"".concat("awn","-confirm")},c={prefix:s.toast,klass:{label:"".concat(s.toast,"-label"),content:"".concat(s.toast,"-content"),icon:"".concat(s.toast,"-icon"),progressBar:"".concat(s.toast,"-progress-bar"),progressBarPause:"".concat(s.toast,"-progress-bar-paused")},ids:{container:"".concat(s.toast,"-container")}},u={prefix:s.popup,klass:{buttons:"".concat("awn","-buttons"),button:s.btn,successBtn:"".concat(s.btn,"-success"),cancelBtn:"".concat(s.btn,"-cancel"),title:"".concat(s.popup,"-title"),body:"".concat(s.popup,"-body"),content:"".concat(s.popup,"-content"),dotAnimation:"".concat(s.popup,"-loading-dots")},ids:{wrapper:"".concat(s.popup,"-wrapper"),confirmOk:"".concat(s.confirm,"-ok"),confirmCancel:"".concat(s.confirm,"-cancel")}},l={klass:{hiding:"".concat("awn","-hiding")},lib:"awn"};function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t,n,r,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.newNode=document.createElement("div"),n&&(this.newNode.id=n),r&&(this.newNode.className=r),o&&(this.newNode.style.cssText=o),this.parent=t,this.options=a}var t,n,r;return t=e,(n=[{key:"beforeInsert",value:function(){}},{key:"afterInsert",value:function(){}},{key:"insert",value:function(){return this.beforeInsert(),this.el=this.parent.appendChild(this.newNode),this.afterInsert(),this}},{key:"replace",value:function(e){var t=this;if(this.getElement())return this.beforeDelete().then((function(){return t.updateType(e.type),t.parent.replaceChild(e.newNode,t.el),t.el=t.getElement(e.newNode),t.afterInsert(),t}))}},{key:"beforeDelete",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el,n=0;return this.start&&(n=this.options.minDurations[this.type]+this.start-Date.now())<0&&(n=0),new Promise((function(r){setTimeout((function(){t.classList.add(l.klass.hiding),setTimeout(r,e.options.animationDuration)}),n)}))}},{key:"delete",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el;return this.getElement(t)?this.beforeDelete(t).then((function(){t.remove(),e.afterDelete()})):null}},{key:"afterDelete",value:function(){}},{key:"getElement",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el;return e?document.getElementById(e.id):null}},{key:"addEvent",value:function(e,t){this.el.addEventListener(e,t)}},{key:"toggleClass",value:function(e){this.el.classList.toggle(e)}},{key:"updateType",value:function(e){this.type=e,this.duration=this.options.duration(this.type)}}])&&f(t.prototype,n),r&&f(t,r),e}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.callback=t,this.remaining=n,this.resume()}var t,n,r;return t=e,(n=[{key:"pause",value:function(){this.paused=!0,window.clearTimeout(this.timerId),this.remaining-=new Date-this.start}},{key:"resume",value:function(){var e=this;this.paused=!1,this.start=new Date,window.clearTimeout(this.timerId),this.timerId=window.setTimeout((function(){window.clearTimeout(e.timerId),e.callback()}),this.remaining)}},{key:"toggle",value:function(){this.paused?this.resume():this.pause()}}])&&p(t.prototype,n),r&&p(t,r),e}();function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function t(e,n,r,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=h(this,y(t).call(this,o,"".concat(c.prefix,"-").concat(Math.floor(Date.now()-100*Math.random())),"".concat(c.prefix," ").concat(c.prefix,"-").concat(n),"animation-duration: ".concat(r.toSecs(r.animationDuration),";"),r))).updateType(n),a.setInnerHtml(e),a}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,e),n=t,(r=[{key:"setInnerHtml",value:function(e){"alert"===this.type&&e&&(e=this.options.formatError(e)),e=this.options.applyReplacements(e,this.type),this.newNode.innerHTML='<div class="awn-toast-wrapper">'.concat(this.progressBar).concat(this.label,'<div class="').concat(c.klass.content,'">').concat(e,'</div><span class="').concat(c.klass.icon,'">').concat(this.options.icon(this.type),"</span></div>")}},{key:"beforeInsert",value:function(){var e=this;if(this.parent.childElementCount>=this.options.maxNotifications){var t=Array.from(this.parent.getElementsByClassName(c.prefix));this.delete(t.find((function(t){return!e.isDeleted(t)})))}}},{key:"afterInsert",value:function(){var e=this;if("async"==this.type)return this.start=Date.now();if(this.addEvent("click",(function(){return e.delete()})),!(this.duration<=0)){this.timer=new v((function(){return e.delete()}),this.duration);for(var t=0,n=["mouseenter","mouseleave"];t<n.length;t++){var r=n[t];this.addEvent(r,(function(){e.isDeleted()||(e.toggleClass(c.klass.progressBarPause),e.timer.toggle())}))}}}},{key:"isDeleted",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.el;return e.classList.contains(l.klass.hiding)}},{key:"progressBar",get:function(){return this.duration<=0||"async"===this.type?"":"<div class='".concat(c.klass.progressBar,"' style=\"animation-duration:").concat(this.options.toSecs(this.duration),';"></div>')}},{key:"label",get:function(){return'<b class="'.concat(c.klass.label,'">').concat(this.options.label(this.type),"</b>")}}])&&m(n.prototype,r),o&&m(n,o),t}(d);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"modal",o=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s="animation-duration: ".concat(o.toSecs(o.animationDuration),";");return(n=j(this,O(t).call(this,document.body,u.ids.wrapper,null,s,o)))[u.ids.confirmOk]=a,n[u.ids.confirmCancel]=i,n.className="".concat(u.prefix,"-").concat(r),["confirm","async-block","modal"].includes(r)||(r="modal"),n.updateType(r),n.setInnerHtml(e),n.insert(),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,e),n=t,(r=[{key:"setInnerHtml",value:function(e){var t=this.options.applyReplacements(e,this.type);switch(this.type){case"confirm":var n=["<button class='".concat(u.klass.button," ").concat(u.klass.successBtn,"'id='").concat(u.ids.confirmOk,"'>").concat(this.options.labels.confirmOk,"</button>")];!1!==this[u.ids.confirmCancel]&&n.push("<button class='".concat(u.klass.button," ").concat(u.klass.cancelBtn,"'id='").concat(u.ids.confirmCancel,"'>").concat(this.options.labels.confirmCancel,"</button>")),t="".concat(this.options.icon(this.type),"<div class='").concat(u.klass.title,"'>").concat(this.options.label(this.type),'</div><div class="').concat(u.klass.content,'">').concat(t,"</div><div class='").concat(u.klass.buttons," ").concat(u.klass.buttons,"-").concat(n.length,"'>").concat(n.join(""),"</div>");break;case"async-block":t="".concat(t,'<div class="').concat(u.klass.dotAnimation,'"></div>')}this.newNode.innerHTML='<div class="'.concat(u.klass.body," ").concat(this.className,'">').concat(t,"</div>")}},{key:"keyupListener",value:function(e){if("async-block"===this.type)return e.preventDefault();switch(e.code){case"Escape":e.preventDefault(),this.delete();case"Tab":if(e.preventDefault(),"confirm"!==this.type||!1===this[u.ids.confirmCancel])return!0;var t=this.okBtn;e.shiftKey?document.activeElement.id==u.ids.confirmOk&&(t=this.cancelBtn):document.activeElement.id!==u.ids.confirmCancel&&(t=this.cancelBtn),t.focus()}}},{key:"afterInsert",value:function(){var e=this;switch(this.listener=function(t){return e.keyupListener(t)},window.addEventListener("keydown",this.listener),this.type){case"async-block":this.start=Date.now();break;case"confirm":this.okBtn.focus(),this.addEvent("click",(function(t){if("BUTTON"!==t.target.nodeName)return!1;e.delete(),e[t.target.id]&&e[t.target.id]()}));break;default:document.activeElement.blur(),this.addEvent("click",(function(t){t.target.id===e.newNode.id&&e.delete()}))}}},{key:"afterDelete",value:function(){window.removeEventListener("keydown",this.listener)}},{key:"okBtn",get:function(){return document.getElementById(u.ids.confirmOk)}},{key:"cancelBtn",get:function(){return document.getElementById(u.ids.confirmCancel)}}])&&_(n.prototype,r),o&&_(n,o),t}(d);function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"default",(function(){return D}));var D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=new i(t)}var t,n,r;return t=e,(n=[{key:"tip",value:function(e,t){return this._addToast(e,"tip",t).el}},{key:"info",value:function(e,t){return this._addToast(e,"info",t).el}},{key:"success",value:function(e,t){return this._addToast(e,"success",t).el}},{key:"warning",value:function(e,t){return this._addToast(e,"warning",t).el}},{key:"alert",value:function(e,t){return this._addToast(e,"alert",t).el}},{key:"async",value:function(e,t,n,r,o){var a=this._addToast(r,"async",o);return this._afterAsync(e,t,n,o,a)}},{key:"confirm",value:function(e,t,n,r){return this._addPopup(e,"confirm",r,t,n)}},{key:"asyncBlock",value:function(e,t,n,r,o){var a=this._addPopup(r,"async-block",o);return this._afterAsync(e,t,n,o,a)}},{key:"modal",value:function(e,t,n){return this._addPopup(e,t,n)}},{key:"closeToasts",value:function(){for(var e=this.container;e.firstChild;)e.removeChild(e.firstChild)}},{key:"_addPopup",value:function(e,t,n,r,o){return new C(e,t,this.options.override(n),r,o)}},{key:"_addToast",value:function(e,t,n,r){n=this.options.override(n);var o=new k(e,t,n,this.container);return r?r instanceof C?r.delete().then((function(){return o.insert()})):r.replace(o):o.insert()}},{key:"_afterAsync",value:function(e,t,n,r,o){return e.then(this._responseHandler(t,"success",r,o),this._responseHandler(n,"alert",r,o))}},{key:"_responseHandler",value:function(e,t,n,r){var o=this;return function(a){switch(B(e)){case"undefined":case"string":var i="alert"===t?e||a:e;o._addToast(i,t,n,r);break;default:r.delete().then((function(){e&&e(a)}))}}}},{key:"_createContainer",value:function(){return new d(document.body,c.ids.container,"awn-".concat(this.options.position)).insert().el}},{key:"container",get:function(){return document.getElementById(c.ids.container)||this._createContainer()}}])&&S(t.prototype,n),r&&S(t,r),e}()}])}))},9285:function(e,t,n){"use strict";var r={},o=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,a="\\d\\d?",i="\\d{3}",s="\\d{4}",c="[^\\s]+",u=/\[([^]*?)\]/gm,l=function(){};function f(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")}function d(e,t){for(var n=[],r=0,o=e.length;r<o;r++)n.push(e[r].substr(0,t));return n}function p(e){return function(t,n,r){var o=r[e].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~o&&(t.month=o)}}function v(e,t){e=String(e),t=t||2;while(e.length<t)e="0"+e;return e}var b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m=["January","February","March","April","May","June","July","August","September","October","November","December"],h=d(m,3),y=d(b,3);r.i18n={dayNamesShort:y,dayNames:b,monthNamesShort:h,monthNames:m,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!==10)*e%10]}};var g={D:function(e){return e.getDate()},DD:function(e){return v(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return e.getDay()},dd:function(e){return v(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return v(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return v(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return v(e.getFullYear(),4)},h:function(e){return e.getHours()%12||12},hh:function(e){return v(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return v(e.getHours())},m:function(e){return e.getMinutes()},mm:function(e){return v(e.getMinutes())},s:function(e){return e.getSeconds()},ss:function(e){return v(e.getSeconds())},S:function(e){return Math.round(e.getMilliseconds()/100)},SS:function(e){return v(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return v(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+v(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)}},k={D:[a,function(e,t){e.day=t}],Do:[a+c,function(e,t){e.day=parseInt(t,10)}],M:[a,function(e,t){e.month=t-1}],YY:[a,function(e,t){var n=new Date,r=+(""+n.getFullYear()).substr(0,2);e.year=""+(t>68?r-1:r)+t}],h:[a,function(e,t){e.hour=t}],m:[a,function(e,t){e.minute=t}],s:[a,function(e,t){e.second=t}],YYYY:[s,function(e,t){e.year=t}],S:["\\d",function(e,t){e.millisecond=100*t}],SS:["\\d{2}",function(e,t){e.millisecond=10*t}],SSS:[i,function(e,t){e.millisecond=t}],d:[a,l],ddd:[c,l],MMM:[c,p("monthNamesShort")],MMMM:[c,p("monthNames")],a:[c,function(e,t,n){var r=t.toLowerCase();r===n.amPm[0]?e.isPm=!1:r===n.amPm[1]&&(e.isPm=!0)}],ZZ:["[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z",function(e,t){var n,r=(t+"").match(/([+-]|\d\d)/gi);r&&(n=60*r[1]+parseInt(r[2],10),e.timezoneOffset="+"===r[0]?n:-n)}]};k.dd=k.d,k.dddd=k.ddd,k.DD=k.D,k.mm=k.m,k.hh=k.H=k.HH=k.h,k.MM=k.M,k.ss=k.s,k.A=k.a,r.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},r.format=function(e,t,n){var a=n||r.i18n;if("number"===typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date in fecha.format");t=r.masks[t]||t||r.masks["default"];var i=[];return t=t.replace(u,(function(e,t){return i.push(t),"@@@"})),t=t.replace(o,(function(t){return t in g?g[t](e,a):t.slice(1,t.length-1)})),t.replace(/@@@/g,(function(){return i.shift()}))},r.parse=function(e,t,n){var a=n||r.i18n;if("string"!==typeof t)throw new Error("Invalid format in fecha.parse");if(t=r.masks[t]||t,e.length>1e3)return null;var i={},s=[],c=[];t=t.replace(u,(function(e,t){return c.push(t),"@@@"}));var l=f(t).replace(o,(function(e){if(k[e]){var t=k[e];return s.push(t[1]),"("+t[0]+")"}return e}));l=l.replace(/@@@/g,(function(){return c.shift()}));var d=e.match(new RegExp(l,"i"));if(!d)return null;for(var p=1;p<d.length;p++)s[p-1](i,d[p],a);var v,b=new Date;return!0===i.isPm&&null!=i.hour&&12!==+i.hour?i.hour=+i.hour+12:!1===i.isPm&&12===+i.hour&&(i.hour=0),null!=i.timezoneOffset?(i.minute=+(i.minute||0)-+i.timezoneOffset,v=new Date(Date.UTC(i.year||b.getFullYear(),i.month||0,i.day||1,i.hour||0,i.minute||0,i.second||0,i.millisecond||0))):v=new Date(i.year||b.getFullYear(),i.month||0,i.day||1,i.hour||0,i.minute||0,i.second||0,i.millisecond||0),v},t["a"]=r},c40d:function(e,t,n){"use strict";var r=n("5eaa"),o=n.n(r),a={icons:{enabled:!1}},i=new o.a(a);t["a"]=i},c428:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row text-center justify-content-center",staticStyle:{height:"calc(100vh - 60px)"}},[r("div",{staticClass:"col-sm-12 align-self-center"},[r("img",{attrs:{src:n("04b1"),height:"90",width:"90"}}),r("h2",[e._v(e._s(e.msg))])])])},o=[],a={name:"Loader",props:{msg:{type:String,default:"Getting data please be patient"}}},i=a,s=n("2877"),c=Object(s["a"])(i,r,o,!1,null,null,null);t["a"]=c.exports},c465:function(e,t,n){"use strict";var r=n("eee4"),o=n.n(r);o.a},c6eb:function(e,t,n){"use strict";(function(e){var r=n("5ea3"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o,s=i&&r["a"].process,c=function(){try{var e=a&&a.require&&a.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(t){}}();t["a"]=c}).call(this,n("dd40")(e))},d81d:function(e,t,n){"use strict";var r=n("23e7"),o=n("b727").map,a=n("1dde"),i=n("ae40"),s=a("map"),c=i("map");r({target:"Array",proto:!0,forced:!s||!c},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},da75:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container-fluid"},[e.loading?n("Loading",{attrs:{msg:e.message}}):e._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"row"},[n("div",{staticClass:"col-sm-12"},[n("h2",[e._v("Books Available for return "+e._s(e.returnbooks.length))])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"form-row"},e._l(e.books,(function(t,r){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.loan_history.length>0&&e.isBookLoaned(t),expression:"book.loan_history.length > 0 && isBookLoaned(book)"}],key:t._id,staticClass:"col-lg-6 mb-2 flex-column"},[n("div",{staticClass:"card h-100"},[n("div",{staticClass:"card-header d-flex"},[n("h4",{staticClass:"text-truncate flex-grow-1 flex-shrink-1 mb-0 pb-1 align-self-center",attrs:{title:t.title}},[e._v(" "+e._s(t.title)+" ")])]),n("div",{staticClass:"card-body"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-6 form-group"},[n("label",[e._v("Copies available")]),e._v(" "+e._s(t.copies_available)+" ")]),n("div",{staticClass:"col-lg-6 form-group"},[n("label",[e._v("Return book from user")]),n("select",{staticClass:"form-control custom-select",domProps:{value:t.loan_to},on:{change:function(t){return e.update("books."+r+".loan_to",t)}}},[n("option",{domProps:{value:""}}),e._l(e.getUsers(t),(function(t){return n("option",{key:t._id,domProps:{value:t._id}},[e._v(" "+e._s(t.name)+" ")])}))],2)])]),n("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.loan_to,expression:"book.loan_to != ''"}],staticClass:"row"},[n("div",{staticClass:"col-sm-12"},[n("button",{staticClass:"btn btn-block btn-primary",on:{click:function(n){return e.returnBook(t)}}},[e._v(" Return book ")])])])])])])})),0)],1)},o=[],a=(n("4de4"),n("d81d"),n("5530")),i=(n("96cf"),n("1da1")),s=n("2f62"),c=n("5c8a"),u=n("c428"),l=n("9285"),f={name:"ReturnBooks",components:{Loading:u["a"]},data:function(){return{message:"",loading:!1}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.message="Getting books please be patient",e.loading=!0,t.next=4,e.loadBooks();case 4:return t.next=6,e.loadUsers();case 6:e.message="",e.loading=!1;case 8:case"end":return t.stop()}}),t)})))()},methods:Object(a["a"])({},Object(s["b"])(["getBooksAction","getUsersAction","updateValue","updateBookAction","updateUserAction"]),{loadBooks:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getBooksAction();case 2:case"end":return t.stop()}}),t)})))()},loadUsers:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getUsersAction();case 2:case"end":return t.stop()}}),t)})))()},getUsers:function(e){var t=e.loan_history,n=this.users.filter((function(e){for(var n=!1,r=0;r<t.length;r++)t[r]._id===e._id&&!0===t[r].is_loaned&&(n=!0);if(n)return e}));return n},update:function(e,t){var n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.updateValue({path:e,value:t.target.value});case 2:case"end":return r.stop()}}),r)})))()},returnBook:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=Object(c["a"])(e),o=Object(c["a"])(t.getUserById(r.loan_to)),a=new Date,r.loan_history=r.loan_history.map((function(e){return e._id===o._id&&(e.is_loaned=!1,e.return_date=l["a"].format(a,"DD-MM-YYYY hh:mm")),e})),r.copies_available++,r.loan_to="",o.onloan--,o.loan_history=o.loan_history.map((function(e){return e._id===r._id&&(e.is_loaned=!1,e.return_date=l["a"].format(a,"DD-MM-YYYY hh:mm")),e})),n.next=10,t.updateBookAction(r);case 10:return n.next=12,t.updateUserAction(o);case 12:case"end":return n.stop()}}),n)})))()},isBookLoaned:function(e){var t=e.loan_history.filter((function(e){return!0===e.is_loaned}));return t.length>0}}),computed:Object(a["a"])({},Object(s["c"])(["getUserById"]),{},Object(s["d"])(["books","users"]),{returnbooks:function(){var e=this,t=this.books.filter((function(t){return t.loan_history.length>0&&e.isBookLoaned(t)}));return t}})},d=f,p=(n("5e93"),n("2877")),v=Object(p["a"])(d,r,o,!1,null,"6eb22124",null);t["default"]=v.exports},dd40:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},dff1:function(e,t,n){"use strict";(function(e){var r=n("26ee"),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o,s=i?r["a"].Buffer:void 0,c=s?s.allocUnsafe:void 0;function u(e,t){if(t)return e.slice();var n=e.length,r=c?c(n):new e.constructor(n);return e.copy(r),r}t["a"]=u}).call(this,n("dd40")(e))},eee4:function(e,t,n){}}]);
//# sourceMappingURL=bundle.books.c08c16bc.js.map